{"ast":null,"code":"var _jsxFileName = \"/Users/jouni/puhelinluettelo/src/App.js\";\nimport React from \"react\";\nimport \"./App.css\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { useEffect } from \"react\";\nimport personService from \"./services/persons2\";\n\nconst Notification = ({\n  message\n}) => {\n  if (message === null) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 10\n    }\n  }, message);\n};\n\nconst Names = ({\n  names,\n  deleteName\n}) => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 5\n    }\n  }, names.name, \" \", names.number, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: deleteName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }\n  }, \"delete\"));\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n  const [errorMsg, setErrorMsg] = useState(null);\n  const [nameListRender, setNameListRender] = useState([]);\n  useEffect(() => {\n    console.log(\"effect\");\n    personService.getAll().then(response => {\n      setPersons(response.data);\n    });\n  }, [nameListRender]);\n  console.log(\"render\", persons.length, \"notes\");\n\n  const addPerson = event => {\n    event.preventDefault();\n\n    if (!persons.some(p => p.name === newName)) {\n      console.log(\"button clicked\", event.target);\n      const nameObject = {\n        name: newName,\n        number: newNumber\n      };\n      personService.create(nameObject).then(response => {\n        setPersons(persons.concat(response.data));\n        setNotification(`Added ${newName} `);\n        setTimeout(() => {\n          setNotification(null);\n        }, 5000);\n        setNewName(\"\");\n        setNewNumber(\"\");\n      });\n    }\n\n    if (persons.some(p => p.name === newName)) {\n      if (window.confirm(`${newName} has already added to phonebook. You wanna replace old number?`)) {\n        const nameObject = {\n          name: newName,\n          number: newNumber\n        };\n        const nameToReplace = persons.filter(name => name.name.includes(newName));\n        axios.put(\"http://localhost:3001/persons/\" + nameToReplace[0].id, nameObject).then(response => console.log(response.data));\n      }\n\n      setNotification(`${newName}´s number updated`);\n      setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n      setNewName(\"\");\n      setNewNumber(\"\");\n      setNameListRender(namesToShow);\n    }\n  };\n\n  const handleNameChange = event => {\n    console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    console.log(event.target.value);\n    setNewNumber(event.target.value);\n  };\n\n  const handleNameSearch = event => {\n    setSearchInput(event.target.value);\n  };\n\n  const namesToShow = persons.filter(p => p.name.includes(searchInput));\n\n  const deleteName = name => () => {\n    axios.delete(\"http://localhost:3001/persons/\" + name.id).then(response => {\n      console.log(response.data);\n      setNotification(`${name.name} deleted `);\n      setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n    }).catch(error => {\n      setErrorMessage(`Note '${name.name}' was already removed from server`);\n      setTimeout(() => {\n        setErrorMessage(null);\n      }, 5000);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, \"Phonebook\"), /*#__PURE__*/React.createElement(Notification, {\n    message: notification,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }), \"search\", /*#__PURE__*/React.createElement(\"input\", {\n    value: searchInput,\n    onChange: handleNameSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, \"Add a new\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: addPerson,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, \"name: \", /*#__PURE__*/React.createElement(\"input\", {\n    value: newName,\n    onChange: handleNameChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, \"number: \", /*#__PURE__*/React.createElement(\"input\", {\n    value: newNumber,\n    onChange: handleNumberChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }, \"add\"))), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, \"Names\"), namesToShow && namesToShow.map((name, i) => /*#__PURE__*/React.createElement(\"div\", {\n    key: i + name.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Names, {\n    key: i,\n    names: name,\n    deleteName: deleteName(name),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }))));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/jouni/puhelinluettelo/src/App.js"],"names":["React","useState","axios","useEffect","personService","Notification","message","Names","names","deleteName","name","number","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searchInput","setSearchInput","notification","setNotification","errorMsg","setErrorMsg","nameListRender","setNameListRender","console","log","getAll","then","response","data","length","addPerson","event","preventDefault","some","p","target","nameObject","create","concat","setTimeout","window","confirm","nameToReplace","filter","includes","put","id","namesToShow","handleNameChange","value","handleNumberChange","handleNameSearch","delete","catch","error","setErrorMessage","map","i"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./App.css\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { useEffect } from \"react\";\nimport personService from \"./services/persons2\";\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className=\"error\">{message}</div>;\n};\n\nconst Names = ({ names, deleteName }) => {\n  return (\n    <div>\n      {names.name} {names.number}\n      <button onClick={deleteName}>delete</button>\n    </div>\n  );\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n  const [errorMsg, setErrorMsg] = useState(null);\n  const [nameListRender, setNameListRender] = useState([]);\n\n  useEffect(() => {\n    console.log(\"effect\");\n    personService.getAll().then((response) => {\n      setPersons(response.data);\n    });\n  }, [nameListRender]);\n  console.log(\"render\", persons.length, \"notes\");\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    if (!persons.some((p) => p.name === newName)) {\n      console.log(\"button clicked\", event.target);\n\n      const nameObject = {\n        name: newName,\n        number: newNumber,\n      };\n\n      personService.create(nameObject).then((response) => {\n        setPersons(persons.concat(response.data));\n\n        setNotification(`Added ${newName} `);\n        setTimeout(() => {\n          setNotification(null);\n        }, 5000);\n        setNewName(\"\");\n        setNewNumber(\"\");\n      });\n    }\n    if (persons.some((p) => p.name === newName)) {\n      if (\n        window.confirm(\n          `${newName} has already added to phonebook. You wanna replace old number?`\n        )\n      ) {\n        const nameObject = {\n          name: newName,\n          number: newNumber,\n        };\n\n        const nameToReplace = persons.filter((name) =>\n          name.name.includes(newName)\n        );\n\n        axios\n          .put(\n            \"http://localhost:3001/persons/\" + nameToReplace[0].id,\n            nameObject\n          )\n          .then((response) => console.log(response.data));\n      }\n      setNotification(`${newName}´s number updated`);\n      setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n      setNewName(\"\");\n      setNewNumber(\"\");\n      setNameListRender(namesToShow);\n    }\n  };\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n  const handleNumberChange = (event) => {\n    console.log(event.target.value);\n    setNewNumber(event.target.value);\n  };\n\n  const handleNameSearch = (event) => {\n    setSearchInput(event.target.value);\n  };\n  const namesToShow = persons.filter((p) => p.name.includes(searchInput));\n\n  const deleteName = (name) => () => {\n    axios\n      .delete(\"http://localhost:3001/persons/\" + name.id)\n      .then((response) => {\n        console.log(response.data);\n        setNotification(`${name.name} deleted `);\n        setTimeout(() => {\n          setNotification(null);\n        }, 5000);\n      })\n      .catch((error) => {\n        setErrorMessage(`Note '${name.name}' was already removed from server`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 5000);\n      });\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} />\n      search\n      <input value={searchInput} onChange={handleNameSearch} />\n      <h2>Add a new</h2>\n      <form onSubmit={addPerson}>\n        <div>\n          name: <input value={newName} onChange={handleNameChange} />\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      <h2>Names</h2>\n      {namesToShow &&\n        namesToShow.map((name, i) => (\n          <div key={i + name.name}>\n            <Names key={i} names={name} deleteName={deleteName(name)} />\n          </div>\n        ))}\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}