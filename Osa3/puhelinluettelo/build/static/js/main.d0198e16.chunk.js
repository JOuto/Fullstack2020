(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),c=t(14),l=t.n(c),u=(t(5),t(3)),r=(t(20),t(2)),i=t.n(r),s=function(){return i.a.get("/api/persons")},m=function(e){return i.a.post("/api/persons",e)},d=function(e){var n=e.message;return null===n?null:n.includes("removed")||n.includes("alidat")?o.a.createElement("div",{className:"error"},n):o.a.createElement("div",{className:"notification"},n)},f=function(e){var n=e.names,t=e.deleteName;return o.a.createElement("div",null,n.name," ",n.number,o.a.createElement("button",{onClick:t},"delete"))},h=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],l=Object(a.useState)(""),r=Object(u.a)(l,2),h=r[0],p=r[1],v=Object(a.useState)(""),b=Object(u.a)(v,2),g=b[0],E=b[1],j=Object(a.useState)(""),w=Object(u.a)(j,2),O=w[0],k=w[1],S=Object(a.useState)(null),y=Object(u.a)(S,2),N=y[0],T=y[1],C=Object(a.useState)(),A=Object(u.a)(C,2),B=A[0],J=A[1];Object(a.useEffect)((function(){console.log("effect"),s().then((function(e){c(e.data)}))}),[B]),console.log("render",t.length,"notes");console.log(t);var W=t.filter((function(e){return e.name.includes(O)})),x=function(e){return function(){i.a.delete("/api/persons/"+e.id).then((function(n){console.log(n.data),J(W),T("".concat(e.name," deleted ")),setTimeout((function(){T(null)}),5e3)})).catch((function(n){T("Note '".concat(e.name,"' was already removed from server")),J(W),setTimeout((function(){T(null)}),5e3)}))}};return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(d,{message:N}),"search",o.a.createElement("input",{value:O,onChange:function(e){k(e.target.value)}}),o.a.createElement("h2",null,"Add a new"),o.a.createElement("form",{onSubmit:function(e){(e.preventDefault(),t.some((function(e){return e.name===h})))||(console.log("button clicked",e.target),m({name:h,number:g}).then((function(e){c(t.concat(e.data)),T("Added ".concat(h," ")),setTimeout((function(){T(null)}),5e3),p(""),E("")})).catch((function(e){console.log(e.response.data),T(e.response.data.error),setTimeout((function(){T(null)}),5e3)})));if(t.some((function(e){return e.name===h}))){if(window.confirm("".concat(h," has already added to phonebook. You wanna replace old number?"))){var n={name:h,number:g},a=t.filter((function(e){return e.name.includes(h)}));i.a.put("/api/persons/"+a[0].id,n).then((function(e){return console.log(e.data)})).catch((function(e){T(e.response.data.error),setTimeout((function(){T(null)}),5e3)})),T("".concat(h,"\xb4s number updated")),setTimeout((function(){T(null)}),5e3)}p(""),E("")}}},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:h,onChange:function(e){console.log(e.target.value),p(e.target.value)}})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:g,onChange:function(e){console.log(e.target.value),E(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add"))),o.a.createElement("h2",null,"Names"),W&&W.map((function(e,n){return o.a.createElement("div",{key:n+e.name},o.a.createElement(f,{key:n,names:e,deleteName:x(e)}))})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(h,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,n,t){}},[[15,1,2]]]);
//# sourceMappingURL=main.d0198e16.chunk.js.map